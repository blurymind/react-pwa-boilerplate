(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{205:function(e,t,n){},239:function(e,t){},248:function(e,t){},250:function(e,t){},269:function(e,t){},271:function(e,t){},299:function(e,t){},300:function(e,t){},305:function(e,t){},307:function(e,t){},314:function(e,t){},333:function(e,t){},371:function(e,t){},372:function(e,t){},419:function(e,t,n){},425:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=425},426:function(e,t,n){},434:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(38),i=n.n(r),c=n(48),s=(n(205),n(10)),l=n(5),u=n(16),d=function(e,t){var n=Object(o.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(o){return console.error(o),t}})),a=Object(l.a)(n,2),r=a[0],i=a[1];return[r,function(t){try{var n=t instanceof Function?t(r):t;i(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(o){console.error(o)}}]},f=function(e){try{var t=window.localStorage.getItem(e);return t?JSON.parse(t):null}catch(n){return console.error(n),null}},h=n(1),m=function(e){var t=e.name,n=void 0===t?"Project":t,o=e.hasChanges,a=void 0!==o&&o,r=e.path,i=void 0===r?"/":r,s=e.textColor,l=void 0===s?"text-red-400":s,d=e.children,f=Object(u.f)().pathname;return Object(h.jsxs)(c.b,{className:"self-center ".concat(l," ").concat(f===i?"bg-gray-100":""),to:i,children:[Object(h.jsxs)("div",{className:"pr-8 md:block hidden",children:[n," ",a?"*":""]}),Object(h.jsx)("div",{className:"px-2 cursor-pointer",children:d})]})},p=function(e){var t=e.className,n=f("hasChanges");return console.log(n),Object(h.jsxs)("nav",{className:t,role:"navigation",children:[Object(h.jsx)(m,{name:"Project",path:"/",textColor:"text-red-400",hasChanges:n,children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})})}),Object(h.jsx)(m,{name:"Sheet",path:"/sheet",textColor:"text-blue-400",children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})})}),Object(h.jsx)(m,{name:"Paint",path:"/paint",textColor:"text-pink-500",children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),Object(h.jsx)(m,{name:"Files",path:"/resources",textColor:"text-green-500",children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"})})}),Object(h.jsx)(m,{name:"Run",path:"/engine",textColor:"text-yellow-400",children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),Object(h.jsx)(m,{name:"Settings",path:"/settings",textColor:"text-purple-500",children:Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[Object(h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),Object(h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),Object(h.jsx)(m,{name:"About",path:"/about",textColor:"text-grey-500",children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})},b=n(200),g=n(4),j=n.n(g),v=n(15),x=n(24),O=n(62),w=n.n(O),y=n(194),N=n.n(y)()(w.a),k=n(212),C=function(){w.a.fire("Not configured","Your github settings are not configured","warning")},S=function(){var e=Object(v.a)(j.a.mark((function e(t,n,o){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new k({token:n}),console.log("Gist",a,n),a&&n&&t?a.get(t).then((function(e){var t=e.body.files,n={};Object.keys(t).forEach((function(e){n[e]=e})),console.log("GIST FILES",t),N.fire({title:"\ud83d\udc19 Open file from a gist",input:"select",inputOptions:n,inputAttributes:{autocomplete:"off"},inputPlaceholder:"Select a file from the gist",showCancelButton:!0}).then((function(e){var n=e.value;if(n){var a=t[n].content,r=t[n].filename;console.log(t[n]),o({content:a,fileName:r})}}))})):(C(),o({}));case 3:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}(),T=function(){var e=Object(v.a)(j.a.mark((function e(t,n){var o,a,r,i=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=i.length>2&&void 0!==i[2]?i[2]:"NewFile",a=i.length>3?i[3]:void 0,r=new k({token:n}),t&&n&&r?r.get(t).then((function(e){var n=Object.keys(e.body.files);console.log(n),r.edit(t,{files:Object(x.a)({},o,{content:a,headers:{contentType:"image/png","content-type":"image/png"}})}),w.a.fire("Saved!","The Yarn has been saved to gist \nName: ".concat(o,"\nAt: ").concat(t,"\nLength: ").concat(a.length," chars"),"success")})):C();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=n.p+"static/media/logo.103b5fa1.svg",L=function(){var e=Object(v.a)(j.a.mark((function e(t,n){var o,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.createWriter){e.next=9;break}return e.next=3,t.createWriter();case 3:return o=e.sent,e.next=6,o.write(0,n);case 6:return e.next=8,o.close();case 8:return e.abrupt("return");case 9:return console.log(t),e.next=12,t.createWritable();case 12:return a=e.sent,e.next=15,a.write(n);case 15:return e.next=17,a.close();case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{extension:"txt"},t=e.extension;if("showSaveFilePicker"in window){var n={types:[{description:"Text file",accept:{"text/plain":[".".concat(t)]}}]};return window.showSaveFilePicker(n)}var o={type:"save-file",accepts:[{description:"Text file",extensions:[t],mimeTypes:["text/plain"]}]};return window.chooseFileSystemEntries(o)},A=function(e){return e.text?e.text():function(e){return new Promise((function(t){var n=new FileReader;n.addEventListener("loadend",(function(e){var n,o=null===(n=e.srcElement)||void 0===n?void 0:n.result;t(o)})),n.readAsText(e)}))}(e)},B=function(e,t){fetch(t).then((function(t){return caches.open("testCache").then((function(n){return console.log("CACHE",n),n.put(e,t)}))}))},D=function(e,t){null===e||void 0===e||e.then((function(e){console.log("got",e);var n=new FileReader;n.onload=function(){var e=n.result;t(e)},n.readAsDataURL(e)}))},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){};caches.open("testCache").then((function(n){n.match(e).then((function(e){console.log("matched",e),D(null===e||void 0===e?void 0:e.blob(),(function(e){t(e)}))}))}))},R=function(){var e=Object(v.a)(j.a.mark((function e(t){var n,o=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=o.length>1&&void 0!==o[1]&&o[1],caches.open("testCache").then((function(e){e.keys().then((function(o){var a={};o.forEach((function(t){var o=t.url.replace(/^.*[\\\/]/,"");e.match(o).then((function(e){if(console.log("matched",o,e),n)return null===e||void 0===e?void 0:e.blob();F(o,(function(e){a[o]={content:e,name:o}}))})).then((function(e){a[o]={content:e,name:o}}))})),setTimeout((function(){console.log("blobs",a),t(a)}),1e3)}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(e){caches.open("testCache").then((function(t){t.keys().then((function(t){var n=t.map((function(e){return e.url.replace(/^.*[\\\/]/,"")}));console.log("filenames",n),e(n)}))}))},W=function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t},U=n(435).Octokit,M=n(386),H=[{id:"af3",label:"Incoming leads",items:[{id:"af31",label:"Item 3.1 - Auguri",className:"bg-red-500 hover:bg-red-700 rounded-md mb-1 mx-1"},{id:"af32",label:"Item 3.2 - Sed tellus risus, tincidunt ac fringilla sed, rho vel elit. Fusce et mauris lobortis"},{id:"af33",label:"Item 3.3 - Praesent nec massa vel ante porta elementum. Nulla urna risus, ullamcorper a nibh sodales, laoreet ullamcorper arcu. Nulla vel ante neque. Ut nunc tortor"},{id:"af34",label:"Item 3.4 - Aliquam hendrerit quis nibh"}],tint:1},{id:"af1",label:"Closing leads",items:[{id:"af11",label:"Item 1.1 - Sed sit amet ornare nisi."},{id:"af12",label:"Item 1.2 - Donec aliquet commodo justo, in faucibus libero efficitur ut. Nam ut lacus in dui sollicitudin sollicitudin."}],tint:2},{id:"af2",label:"On hold",items:[{id:"af21",label:"Item 2.1 - Vivamus eget ante tempor"},{id:"af22",label:"Item 2.2 - Pellentesque euismod"}],tint:3}],V=function(e){var t=e.onChange,n=void 0===t?function(){}:t,a=f("gistId"),r=f("gistToken"),i=f("userName"),c=f("repositoryName"),s=d("dnd-sheet-data",H),u=Object(l.a)(s,2),m=u[0],p=u[1],g=d("hasChanges",!1),x=Object(l.a)(g,2),O=x[0],y=x[1],B=d("fileName","NewFile"),D=Object(l.a)(B,2),F=D[0],P=D[1],W=d("hostType",null),V=Object(l.a)(W,2),K=V[0],q=V[1],G=d("recentFiles",[]),J=Object(l.a)(G,2),z=J[0],_=J[1],Y=Object(o.useRef)(null),$=new U({auth:r}),Z=Object(o.useRef)(new M({username:i,token:r}));console.log("GITHUB",Z);var Q=function(){var e=Object(v.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R(function(){var e=Object(v.a)(j.a.mark((function e(t){var n,o,a,r,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(n,o){e.repository.writeFile(e.branchName,e.filename,e.content,e.commitTitle,{encode:t},(function(t){t?o(t):n(e.repository)}))}))},a=function(e){return new Promise((function(t,n){var o=new FileReader;o.addEventListener("load",(function(n){var o,a=null===(o=n.target)||void 0===o?void 0:o.result;console.log("file",n,e);var r=a.substr(a.indexOf(",")+1);t({filename:e.name,file:e,content:r})})),o.addEventListener("error",(function(e){n(e)})),o.readAsDataURL(e.content)}))},r=[].map.call(Object.values(t),a),s=null===(n=Z.current)||void 0===n?void 0:n.getRepo(i,c),e.abrupt("return",Promise.all(r).then((function(e){return e.reduce((function(e,t){return e.then((function(){return console.log("FLINE>",t),o({repository:s,branchName:"master",filename:t.filename,content:t.content,commitTitle:"add file "+t.filename})}))}),Promise.resolve())})).then((function(){console.log("SAVE PROJECT"),o({repository:s,branchName:"master",filename:"project.json",content:JSON.stringify(m),commitTitle:"add project file"},!0)})).then((function(){alert("DONE!")})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log("CRED:",i,c,r);var X=function(){var e=Object(v.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.request("GET /gists/".concat(a),{gist_id:a});case 2:return t=e.sent,console.log("octo got",t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){X().then((function(e){console.log("Octo got gists files:",e.data.files)})),K&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"addBtn",t=null,n=document.getElementById(e);window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),t=e,n.style.display="block",n.addEventListener("click",(function(){n.style.display="none",t.prompt(),t.userChoice.then((function(e){"accepted"===e.outcome?(console.log("User accepted the A2HS prompt"),n.style.display="none"):console.log("User dismissed the A2HS prompt"),t=null}))})),window.matchMedia("(display-mode: fullscreen)").matches&&(n.style.display="none")}))}("addBtn")}),[]);var ee=function(){var e=Object(v.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.current){e.next=5;break}return e.next=3,I({extension:"json"});case 3:Y.current=e.sent,console.log("new file",null===(t=Y.current)||void 0===t?void 0:t.name);case 5:L(Y.current,JSON.stringify(m)),console.log("wrote to",Y.current),y(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(v.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"gist"===K?Q():ee();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(v.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=f("gistId"),n=f("gistToken"),S(t,n,(function(e){var t=e.content,n=e.fileName;console.log("Got this:",t),p(JSON.parse(t)),Y.current={name:n},P(n),y(!1)})),q("gist");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(v.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,"showOpenFilePicker"in window?window.showOpenFilePicker().then((function(e){return e[0]})):window.chooseFileSystemEntries();case 2:return Y.current=e.sent,e.next=5,Y.current.getFile();case 5:return t=e.sent,e.next=8,A(t);case 8:n=e.sent,console.log("opened file",n),p(JSON.parse(n)),y(!1),q("fs");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){K&&z&&!z.find((function(e){return e.fileName===F&&e.hostType===K}))&&_([].concat(Object(b.a)(z),[{fileName:F,hostType:K}]))}),[m,K,F]);var ae=function(e,t){e===F&&K===t||"gist"===t&&function(e,t,n,o){var a=new k({token:t});a&&t&&e?a.get(e).then((function(t){var a=t.body.files[n].content;o(a),w.a.fire("Opened","The Yarn has been loaded from gist \nName: ".concat(n,"\nAt: ").concat(e,"\nLength: ").concat(a.length," chars"),"success")})):C()}(a,r,e,(function(o){p(JSON.parse(o)),P(e),y(!1),q(t),n({fileName:e,hasChanges:!1,hostType:t})}))};return Object(h.jsxs)("div",{className:"flex flex-1 flex-col overflow-auto bg-gray-600",children:[Object(h.jsxs)("header",{className:"pt-2 flex flex-row",children:[Object(h.jsx)("img",{src:E,className:"animate-spin h-8",alt:"logo"}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{id:"addBtn",className:"bg-blue-400 rounded-md p-1 mb-3",children:"Install pwa"}),Object(h.jsxs)("div",{className:"flex-box flex-wrap flex-1",children:[a&&r&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:ne,className:"bg-red-400 rounded-md p-1 mb-3 mx-1",children:"Open gist"}),Object(h.jsx)("button",{className:"bg-red-400 rounded-md p-1 mb-3 mx-1",onClick:function(){!function(e){var t=e.fileName,n=void 0===t?"NewFile":t,o=e.setFileName,a=e.gistId,r=e.token,i=e.data,c=new k({token:r});a&&r&&c?c.get(a).then((function(e){var t=Object.keys(e.body.files);N.fire({title:"\ud83d\udcbe Save file - enter file name",html:'<input id="swal-input1" list="select-file-name" name="select" placeholder="'.concat(n,'">\n      <datalist class="form-control" id="select-file-name">    \n        ').concat(t&&t.map((function(e){return'<option value="'.concat(e,'" />')})).join(""),"\n      </datalist>"),onOpen:function(){"NewFile"!==n&&document.getElementById("swal-input1")&&(document.getElementById("swal-input1").value=n)},showCancelButton:!0,preConfirm:function(){var e;return null===(e=document.getElementById("swal-input1"))||void 0===e?void 0:e.value}}).then((function(e){var t=e.value;t&&""!==t&&(T(a,r,t,i),o(t))}))})):C()}({gistId:a,token:r,fileName:F,setFileName:P,data:JSON.stringify(m)}),q("gist"),y(!1)},children:"Save as Gist"})]}),Object(h.jsx)("button",{onClick:oe,className:"bg-green-400 rounded-md p-1 mb-3 mx-1",children:"Open local"}),Object(h.jsx)("button",{className:"bg-green-400 rounded-md p-1 mb-3 mx-1",onClick:ee,children:"Save as Local"}),K&&Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("button",{className:"bg-yellow-400 rounded-md p-1 mb-3 mx-1",onClick:te,children:["Save ",F," ",O?"*":""," ",K||""]})})]})]}),Object(h.jsxs)("div",{className:"px-2 pb-2 flex flex-1 flex-col overflow-hidden",children:[Object(h.jsx)("div",{className:"p-2 bg-gray-400",children:"Open recent:"}),Object(h.jsx)("div",{className:"flex flex-1 flex-col overflow-auto",children:z.map((function(e,t){return Object(h.jsxs)("div",{className:"p-2 bg-gray-".concat(t%2?200:300," hover:bg-gray-100"),onClick:function(){return ae(e.fileName,e.hostType)},children:[e.fileName," @ ",e.hostType]},"recentFile-".concat(e.fileName,"-").concat(e.hostType))}))})]})]})},K=n(50),q=function(e){var t=e.id,n=e.items,o=e.label;return Object(h.jsx)(K.c,{droppableId:t,children:function(e){return Object(h.jsx)("div",Object(s.a)(Object(s.a)({},e.droppableProps),{},{ref:e.innerRef,children:Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"bg-gray-500 rounded-t-md",children:o}),Object(h.jsx)("div",{className:"bg-gray-500 rounded-b-md",children:Object(h.jsxs)("ul",{className:"list",children:[n.filter(Boolean).map((function(e,t){return Object(h.jsx)("li",{className:"".concat(e.className," w-full"),children:Object(h.jsx)(K.b,{draggableId:e.id,index:t,children:function(t){return Object(h.jsx)("div",Object(s.a)(Object(s.a)(Object(s.a)({className:e.className||"bg-blue-400 rounded-md mb-1 mx-1"},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,children:e.label}))}})},e.id)})),e.placeholder]})})]})}))}})},G=function(e){var t=e.items,n=e.setItems,a=e.onChange,r=e.className,i=Object(o.useState)({}),c=Object(l.a)(i,2),u=c[0],d=c[1],f=function(e){for(var t={},o=0;o<Object.keys(e).length;++o){t[e[o].id]=o}n(e),d(t)};return Object(o.useEffect)((function(){f(t)}),[]),Object(h.jsx)(K.a,{onDragEnd:function(e){var o=e.destination,r=(e.draggableId,e.source),i=e.type;if(o&&(o.droppableId!==r.droppableId||o.index!==r.index)){if("group"===i){var c=r.index,d=o.index,h=t.slice(),m=h.splice(c,1),p=Object(l.a)(m,1)[0];return h.splice(d,0,p),void f(h)}var b=u[r.droppableId],g=u[o.droppableId],j=t[b].items.slice(),v=r.droppableId!==o.droppableId?t[g].items.slice():j,x=j.splice(r.index,1),O=Object(l.a)(x,1)[0];v.splice(o.index,0,O);var w=t.slice();w[b]=Object(s.a)(Object(s.a)({},t[b]),{},{items:j}),w[g]=Object(s.a)(Object(s.a)({},t[g]),{},{items:v}),n(w),a(w)}},children:Object(h.jsx)(K.c,{droppableId:"ROOT",type:"group",children:function(e){return Object(h.jsxs)("div",Object(s.a)(Object(s.a)({},e.droppableProps),{},{ref:e.innerRef,className:r,children:[t.map((function(e,t){return Object(h.jsx)(K.b,{draggableId:e.id,index:t,children:function(t){return Object(h.jsx)("div",Object(s.a)(Object(s.a)(Object(s.a)({},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,children:Object(h.jsx)(q,Object(s.a)({},e),e.id)}))}},e.id)})),e.placeholder]}))}})})},J=(n(419),[{id:"af3",label:"Incoming leads",items:[{id:"af31",label:"Item 3.1 - Auguri",className:"bg-red-500 hover:bg-red-700 rounded-md mb-1 mx-1"},{id:"af32",label:"Item 3.2 - Sed tellus risus, tincidunt ac fringilla sed, rho vel elit. Fusce et mauris lobortis"},{id:"af33",label:"Item 3.3 - Praesent nec massa vel ante porta elementum. Nulla urna risus, ullamcorper a nibh sodales, laoreet ullamcorper arcu. Nulla vel ante neque. Ut nunc tortor"},{id:"af34",label:"Item 3.4 - Aliquam hendrerit quis nibh"}],tint:1},{id:"af1",label:"Closing leads",items:[{id:"af11",label:"Item 1.1 - Sed sit amet ornare nisi."},{id:"af12",label:"Item 1.2 - Donec aliquet commodo justo, in faucibus libero efficitur ut. Nam ut lacus in dui sollicitudin sollicitudin."}],tint:2},{id:"af2",label:"On hold",items:[{id:"af21",label:"Item 2.1 - Vivamus eget ante tempor"},{id:"af22",label:"Item 2.2 - Pellentesque euismod"}],tint:3}]),z=function(e){var t=e.onChange,n=void 0===t?function(){}:t,o=d("dnd-sheet-data",J),a=Object(l.a)(o,2),r=a[0],i=a[1];return Object(h.jsxs)("div",{className:"bg-gray-700 flex flex-1 flex-col overflow-auto",children:[Object(h.jsx)(G,{items:r,setItems:i,onChange:function(){n({hasChanges:!0})},className:"px-4"}),"=="]})},_=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:"Created by Todor Imreorov"}),Object(h.jsx)("a",{href:"https://github.com/blurymind/react-pwa-boilerplate",children:"Check out the source code at https://github.com/blurymind/react-pwa-boilerplate"})]})},Y=function(){var e=d("gistId",""),t=Object(l.a)(e,2),n=t[0],o=t[1],a=d("gistToken",""),r=Object(l.a)(a,2),i=r[0],c=r[1],s=d("userName",""),u=Object(l.a)(s,2),f=u[0],m=u[1],p=d("password",""),b=Object(l.a)(p,2),g=b[0],j=b[1],v=d("repositoryName",""),x=Object(l.a)(v,2),O=x[0],w=x[1];return Object(h.jsxs)("div",{className:"border flex flex-col m-4 p-1 bg-gray-100",children:[Object(h.jsx)("label",{className:"mb-3 bg-gray-200 flex-1",children:"Storage:"}),Object(h.jsxs)("div",{className:"mb-1 flex-1",children:[Object(h.jsx)("label",{children:"Git username: "}),Object(h.jsx)("input",{onChange:function(e){return m(e.target.value)},value:f,className:"bg-white flex-1"})]}),Object(h.jsxs)("div",{className:"mb-1 flex-1",children:[Object(h.jsx)("label",{children:"Password: "}),Object(h.jsx)("input",{onChange:function(e){return j(e.target.value)},type:"password",value:g,className:"bg-white flex-1"})]}),Object(h.jsxs)("div",{className:"mb-1 flex-1",children:[Object(h.jsx)("label",{children:"Git branch name: "}),Object(h.jsx)("input",{onChange:function(e){return w(e.target.value)},value:O,className:"bg-white flex-1"}),0===O.length&&Object(h.jsx)("a",{target:"_blank",href:"https://github.com/new",className:"ml-4 bg-gray-300 px-3",children:"create"})]}),Object(h.jsxs)("div",{className:"mb-1 flex-1",children:[Object(h.jsx)("label",{children:"Auth token: "}),Object(h.jsx)("input",{onChange:function(e){return c(e.target.value)},type:"password",value:i,className:"bg-white flex-1"}),0===i.length&&Object(h.jsx)("a",{target:"_blank",href:"https://github.com/settings/tokens/new",className:"ml-4 bg-gray-300 px-3",children:"create"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:"Gist id: "}),Object(h.jsx)("input",{onChange:function(e){return o(e.target.value)},type:"text",value:n,className:"bg-white flex-1"}),0===n.length&&Object(h.jsx)("a",{target:"_blank",href:"https://gist.github.com/",className:"ml-4 bg-gray-300 px-3",children:"create"})]})]})},$=n(74),Z=function(e){var t=e.children,n=e.as,a=void 0===n?"div":n,r=Object($.a)(e,["children","as"]);return Object(o.createElement)(a,Object(s.a)({},r),t)},Q={Name:"My Visual Novel",Version:"0.1.0",Label:"Start",Slots:10,MultiLanguage:!1,LanguageSelectionScreen:!0,MainScreenMusic:"",SaveLabel:"Save",AutoSaveLabel:"AutoSave",ShowMainScreen:!0,Preload:!1,AutoSave:0,ServiceWorkers:!1,AspectRatio:"16:9",ForceAspectRatio:"None",TypeAnimation:!0,NVLTypeAnimation:!0,NarratorTypeAnimation:!0,CenteredTypeAnimation:!0,Orientation:"landscape",Skip:0,AssetsPath:{root:"data:",characters:"characters",icons:"icons",images:"images",music:"music",scenes:"scenes",sounds:"sounds",ui:"ui",videos:"videos",voices:"voices",gallery:"gallery"},SplashScreenLabel:"_SplashScreen",Storage:{Adapter:"LocalStorage",Store:"GameData",Endpoint:""}},X={Language:"English",Volume:{Music:1,Voice:1,Sound:1,Video:1},Resolution:"800x600",TextSpeed:20,AutoPlaySpeed:5},ee={player:{name:""}},te=n(420),ne=(te.$_ready,te.$_,te.default),oe=function(){return Object(o.useEffect)((function(){return ne.settings(Q),ne.preferences(X),ne.storage(ee),function(e){e.action("message").messages({}),e.action("notification").notifications({}),e.configuration("credits",{}),e.action("particles").particles({}),e.assets("gallery",{}),e.assets("music",{}),e.assets("voices",{}),e.assets("sounds",{}),e.assets("videos",{}),e.assets("images",{});var t={};P((function(n){return n.forEach((function(n){F(n,(function(o){t[n.replace(".png","")]=o,e.assets("scenes",t)}))}))})),console.log("SCENES",t),e.assets("scenes",t),e.characters({m:{name:"Mika",color:"#facade"}}),e.script({Start:["There's gotta be a way out of this room.","jump North"],North:[{Conditional:{Condition:function(){return e.storage().doorOpen},False:"show scene facingDoorClosed",True:"show scene facingDoorOpen"}},{Choice:{Dialog:"m Facing North.",Class:"navigationBox",theDoorClosedNoKey:{Text:"The Door",Do:"jump lockedDoorText",Class:"theDoorButton",Condition:function(){return!e.storage().haveKey}},theDoorClosedHaveKey:{Text:"The Door",Do:"jump unlockDoor",Class:"theDoorButton",Condition:function(){return e.storage().haveKey}},turnLeft:{Text:"turnLeft",Do:"jump West",Class:"turnLeftButton"},turnRight:{Text:"moveRight",Do:"jump East",Class:"turnRightButton"},turnAround:{Text:"turnAround",Do:"jump South",Class:"turnAroundButton"}}}],South:[{Conditional:{Condition:function(){return e.storage().haveKey},True:"show scene emptyWall",False:"show scene key"}},{Choice:{Dialog:"m Facing South.",Class:"navigationBox",theDoorClosedNoKey:{Text:"The Key",Do:"jump pickUpKey",Class:"theKeyButton",Condition:function(){return!e.storage().haveKey}},turnLeft:{Text:"turnLeft",Do:"jump East",Class:"turnLeftButton"},turnRight:{Text:"moveRight",Do:"jump West",Class:"turnRightButton"},turnAround:{Text:"turnAround",Do:"jump North",Class:"turnAroundButton"}}}],pickUpKey:["You pick up the key!",{Function:{Apply:function(){return e.storage().haveKey=!0,!0},Reverse:function(){e.storage().haveKey=!1}}},"jump South"],East:["show scene emptyWall",{Choice:{Dialog:"m Facing East.",Class:"navigationBox",turnLeft:{Text:"turnLeft",Do:"jump North",Class:"turnLeftButton"},turnRight:{Text:"moveRight",Do:"jump South",Class:"turnRightButton"},turnAround:{Text:"turnAround",Do:"jump West",Class:"turnAroundButton"}}}],West:["show scene emptyWall",{Choice:{Dialog:"m Facing West.",Class:"navigationBox",turnLeft:{Text:"turnLeft",Do:"jump South",Class:"turnLeftButton"},turnRight:{Text:"moveRight",Do:"jump North",Class:"turnRightButton"},turnAround:{Text:"turnAround",Do:"jump East",Class:"turnAroundButton"}}}],lockedDoorText:["The knob won't turn. The door's locked.","jump North"],unlockDoor:[{Conditional:{Condition:function(){return e.storage().doorOpen},False:"next",True:"jump Ending"}},"The key works! The door unlocks and opens!",{Function:{Apply:function(){return e.storage().doorOpen=!0,!0},Reverse:function(){e.storage().doorOpen=!1}}},"jump North"],Ending:["show scene #000000","I finally escaped the room.","Ending 1. Escape. (There are no other endings. You did it. Good job.)","end"]})}(ne),ne.init("#monogatari").then((function(){console.log(ne.history()),console.log(ne.state()),console.log(ne.assets())})),n(426),n(427),function(){console.log("unmount",ne.Storage.configuration().name),setTimeout((function(){window.location.reload()}),100)}})),Object(h.jsx)("div",{id:"monogatari",className:"flex flex-1",children:Object(h.jsxs)(Z,{as:"visual-novel",children:[Object(h.jsx)(Z,{as:"language-selection-screen"}),Object(h.jsx)(Z,{as:"loading-screen"}),Object(h.jsx)(Z,{as:"main-screen",children:Object(h.jsx)(Z,{as:"main-menu"})}),Object(h.jsxs)(Z,{as:"game-screen",children:[Object(h.jsx)(Z,{as:"dialog-log"}),Object(h.jsx)(Z,{as:"text-box"}),Object(h.jsx)(Z,{as:"quick-menu"})]}),Object(h.jsx)(Z,{as:"gallery-screen"}),Object(h.jsx)(Z,{as:"credits-screen"}),Object(h.jsx)(Z,{as:"load-screen"}),Object(h.jsx)(Z,{as:"save-screen"}),Object(h.jsx)(Z,{as:"settings-screen"}),Object(h.jsx)(Z,{as:"help-screen"})]})})},ae=n(199),re=function(e){Object(ae.a)(e);var t=Object(o.useRef)(null),n=Object(o.useState)([]),a=Object(l.a)(n,2),r=a[0],i=a[1],c=Object(o.useState)(""),s=Object(l.a)(c,2),u=s[0];s[1];Object(o.useEffect)((function(){P(i)}),[]);return Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{type:"file",onChange:function(e){e.target.files.forEach((function(e){!function(e){var t=URL.createObjectURL(e);B(e.name,t),setTimeout((function(){P(i)}),100)}(e)})),setTimeout((function(){var e;null===(e=t.current)||void 0===e||e.contentDocument.location.reload(!0)}),500)},multiple:!0})," \u21b4",!!u&&Object(h.jsx)("input",{type:"button",value:"root/ ",onClick:function(){var e;null===(e=t.current)||void 0===e||e.contentWindow.history.go(-1)},className:"bg-yellow-400 rounded-md p-1 mr-3"}),u,r.map((function(e){return Object(h.jsx)("div",{children:e},e)}))]})},ie=n(428),ce=n(433).save;var se=function(){var e=Object(o.useRef)(null),t=d("currentChick","new"),a=Object(l.a)(t,2),r=a[0],i=a[1],c=d("chickWidgetPositions",{}),s=Object(l.a)(c,2),u=s[0],f=s[1],m=d("chiCanvasSize",{width:600,height:300}),p=Object(l.a)(m,2),b=p[0],g=p[1],O=function(){var e=Object(v.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.fire({title:'New file "'.concat(r,'":'),html:'<div className="flex flex-column">'+'<div>width: <input id="swal-input1" class="swal2-input" value="'.concat(b.width,'" type="number" min="5"></div>')+'<div>height: <input id="swal-input2" class="swal2-input" value="'.concat(b.height,'" type="number" min="5"></div>')+"</div>",focusConfirm:!1,preConfirm:function(){var e,t;return[null===(e=document.getElementById("swal-input1"))||void 0===e?void 0:e.value,null===(t=document.getElementById("swal-input2"))||void 0===t?void 0:t.value]}});case 2:if(t=e.sent,!(n=t.value)){e.next=6;break}return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){null!==e.current&&(console.log("CHI SIZE",b),w(!0))}),[b]);var w=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];setTimeout((function(){P((function(n){var o=n.includes(r+".chi")?r+".chi":n.includes(r+".png")?r+".png":"";console.log(n,o,r),o?F(o,(function(t){e.current=new ie(Object(x.a)({uiElem:document.getElementById("chickenpaint-parent")},o.includes(".chi")?"loadChibiFileUrl":"loadImageUrl",t))})):(t||O().then((function(e){console.log(e);var t=Object(l.a)(e,2),n=t[0],o=t[1];console.log(n,"x"),g({width:n,height:o})})),e.current=new ie({uiElem:document.getElementById("chickenpaint-parent"),canvasWidth:(null===b||void 0===b?void 0:b.width)||300,canvasHeight:(null===b||void 0===b?void 0:b.height)||200})),setTimeout((function(){var o;if(!t){var a=null===(o=document.getElementsByClassName("navbar-brand"))||void 0===o?void 0:o[0];null===a||void 0===a||a.remove();var c=document.createElement("input");c.type="list",c.id="fileNameInput",c.placeholder="new",c.value=r,c.setAttribute("list","fileSuggestions");var s=document.createElement("datalist");s.id="fileSuggestions";var d=n.map((function(e){return e.replace(".png","").replace(".chi","")}));d.filter((function(e,t){return d.indexOf(e)===t})).forEach((function(e){var t=document.createElement("option");t.value=e,s.appendChild(t)})),c.appendChild(s),document.getElementsByClassName("navbar navbar-expand-md navbar-light bg-light")[0].appendChild(c),c.addEventListener("change",(function(e){console.log(e.target.value),i(e.target.value)}));var f=document.createElement("button");f.id="saveBtn",f.textContent="save",f.onclick=function(){var t,n,o,a,r;console.log(e.current,null===(t=e.current)||void 0===t?void 0:t.getArtwork());var i=W(null===(n=e.current)||void 0===n?void 0:n.getArtwork().getFlatPNG()),s=new Blob([i],{type:"image/png"}),l=URL.createObjectURL(s);B((c.value||c.placeholder||"chickenPaint")+".png",l),console.log(null===(o=e.current)||void 0===o?void 0:o.getArtwork(),null===(a=e.current)||void 0===a?void 0:a.artwork.getLayersRoot().getLinearizedLayerList(!1)),ce(null===(r=e.current)||void 0===r?void 0:r.getArtwork()).then((function(e){console.log("Layered saved:",e);var t=URL.createObjectURL(e.bytes);B((c.value||c.placeholder||"chickenPaint")+".chi",t)}))},document.getElementsByClassName("navbar navbar-expand-md navbar-light bg-light")[0].appendChild(f),console.log(e.current),Object.entries(u).forEach((function(e){var t=Object(l.a)(e,2),n=t[0],o=t[1];document.getElementsByClassName(n)[0].style=o}))}}),100)}))}),100)};return Object(o.useEffect)((function(){return n(432),function(){}}),[]),Object(o.useEffect)((function(){w()}),[r]),Object(h.jsx)("div",{id:"chickenpaint-parent",className:"flex-1",onPointerUp:function(){var e={};[].slice.call(document.getElementsByClassName("chickenpaint-palette")).forEach((function(t){e[t.getAttribute("class")]=t.style.cssText})),console.log("stored styles",e),f(e)}},r)},le=function(){var e=Object(o.useState)({fileName:f("fileName"),hasChanges:f("hasChanges"),hostType:f("hostType")}),t=Object(l.a)(e,2),n=t[0],a=t[1],r=n.fileName,i=n.hasChanges,d=n.hostType;return Object(h.jsxs)("div",{className:"h-screen flex flex-col overflow-hidden",children:[Object(h.jsx)(p,{className:"flex justify-between item-center h-13 bg-white text-black relative shadow-sm font-mono"}),Object(h.jsxs)("div",{className:"flex justify-between item-center bg-gray-800 pl-2 text-white text-xs",children:[r,"-",d||"",i?"*":""]}),Object(h.jsx)(c.a,{basename:"/react-pwa-boilerplate",children:Object(h.jsx)(u.a,{render:function(e){var t=e.location;return Object(h.jsxs)(u.c,{location:t,children:[Object(h.jsx)(u.a,{path:"/",exact:!0,render:function(e){return Object(h.jsx)(V,Object(s.a)(Object(s.a)({},e),{},{onChange:function(e){return a(e)}}))}}),Object(h.jsx)(u.a,{path:"/sheet",exact:!0,render:function(e){return Object(h.jsx)(z,Object(s.a)(Object(s.a)({},e),{},{onChange:function(e){return a((function(t){return Object(s.a)(Object(s.a)({},t),e)}))}}))}}),Object(h.jsx)(u.a,{path:"/engine",component:oe}),Object(h.jsx)(u.a,{path:"/settings",component:Y}),Object(h.jsx)(u.a,{path:"/paint",component:se}),Object(h.jsx)(u.a,{path:"/resources",component:re}),Object(h.jsx)(u.a,{path:"/about",component:_})]})}})})]})},ue=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function de(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,436)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),o(e),a(e),r(e),i(e)}))};i.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(c.a,{children:Object(h.jsx)(le,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/react-pwa-boilerplate",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/react-pwa-boilerplate","/service-worker.js");ue?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):de(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):de(t,e)}))}}(),fe()}},[[434,1,2]]]);
//# sourceMappingURL=main.b69e90ff.chunk.js.map